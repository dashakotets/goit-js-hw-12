{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n// axios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchPhotos = (searchedPhotos, page) => {\n    const axiosOptions = {\n        params: {key: '45683137-9da9ef345b4290ae910ded200',\n        q: searchedPhotos,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n        },\n        \n    };\n\n    return axios.get(`https://pixabay.com/api/`, axiosOptions);\n};\n\n","export const createGalleryCardTemplate = card => {\n    return `<li class=\"gallery-card\">\n    <a href=\"${card.largeImageURL}\"><img src=\"${card.previewURL}\" alt=\"\" title=\"\" class=\"gallery-img\"/></a>\n    <div class=\"card-info\">\n    <ul class=\"info-text\">\n    <li>Likes<span>${card.likes}</span></li>\n    <li>Views<span>${card.views}</span></li>\n    <li>Comments<span>${card.comments}</span></li>\n    <li>Downloads<span>${card.downloads}</span></li>\n    </ul>\n</div></li>`;\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchPhotos } from \"./js/pixabay-api\";\nimport { createGalleryCardTemplate } from \"./js/render-functions\";\n\nconst searchForm = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.js-load-more');\n\n\nlet currentPage = 1;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n                captions: true, \n                captionDelay: 250, \n                captionPosition: 'bottom',\n});\n            \nconst onSearchSubmit = async event => {\n    try {\n    event.preventDefault();\n    const searchedValue = searchForm.elements.user_query.value;\n\n    currentPage = 1;\n        \n    loaderEl.classList.toggle('is-hidden');\n        const response = await fetchPhotos(searchedValue, currentPage);\n        console.log(response);\n    loaderEl.classList.toggle('is-hidden');\n        \n    if (response.data.hits.length === 0) {\n        iziToast.error({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n            });\n\n        galleryEl.innerHTML = '';\n        searchForm.reset();\n        return;\n    };\n\n    const galleryCardsTemplate = response.data.hits.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n\n    galleryEl.innerHTML = galleryCardsTemplate;\n\n    lightbox.refresh();\n    loadMoreBtn.classList.remove('is-hidden');\n    } catch (err){\n        iziToast.error({\n                message: err,\n                position: 'topRight',\n            });\n    };\n    \n};\n\nconst onAddMoreBtn = async event => {\n    try {\n        currentPage++;\n    \n        loaderEl.classList.toggle('is-hidden');\n        const response = await fetchPhotos(searchedValue, currentPage);\n        loaderEl.classList.toggle('is-hidden');\n\n        const galleryCardsTemplate = response.data.hits.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n        \n        galleryEl.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n\n        if (currentPage === response.data.totalHits) {\n            loadMoreBtn.classList.add('is-hidden');\n        }\n\n    } catch (err) {\n        iziToast.error({\n                message: err,\n                position: 'topRight',\n            });\n    }\n};\n\nsearchForm.addEventListener('submit', onSearchSubmit);\nloadMoreBtn.addEventListener('click', onAddMoreBtn);"],"names":["fetchPhotos","searchedPhotos","page","axiosOptions","axios","createGalleryCardTemplate","card","searchForm","galleryEl","loaderEl","loadMoreBtn","currentPage","lightbox","SimpleLightbox","onSearchSubmit","event","searchedValue","response","iziToast","galleryCardsTemplate","imgDetails","err","onAddMoreBtn"],"mappings":"owBAIO,MAAMA,EAAc,CAACC,EAAgBC,IAAS,CACjD,MAAMC,EAAe,CACjB,OAAQ,CAAC,IAAK,qCACd,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACT,CAET,EAEI,OAAOE,EAAM,IAAI,2BAA4BD,CAAY,CAC7D,EClBaE,EAA4BC,GAC9B;AAAA,eACIA,EAAK,aAAa,eAAeA,EAAK,UAAU;AAAA;AAAA;AAAA,qBAG1CA,EAAK,KAAK;AAAA,qBACVA,EAAK,KAAK;AAAA,wBACPA,EAAK,QAAQ;AAAA,yBACZA,EAAK,SAAS;AAAA;AAAA,aCCjCC,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAc,SAAS,cAAc,eAAe,EAG1D,IAAIC,EAAc,EAElB,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAClC,SAAU,GACV,aAAc,IACd,gBAAiB,QACjC,CAAC,EAEKC,EAAiB,MAAMC,GAAS,CAClC,GAAI,CACJA,EAAM,eAAc,EACpB,MAAMC,EAAgBT,EAAW,SAAS,WAAW,MAErDI,EAAc,EAEdF,EAAS,UAAU,OAAO,WAAW,EACjC,MAAMQ,EAAW,MAAMjB,EAAYgB,EAAeL,CAAW,EAIjE,GAHI,QAAQ,IAAIM,CAAQ,EACxBR,EAAS,UAAU,OAAO,WAAW,EAEjCQ,EAAS,KAAK,KAAK,SAAW,EAAG,CACjCC,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UACtB,CAAa,EAELV,EAAU,UAAY,GACtBD,EAAW,MAAK,EAChB,MACR,CAEI,MAAMY,EAAuBF,EAAS,KAAK,KAAK,IAAIG,GAAcf,EAA0Be,CAAU,CAAC,EAAE,KAAK,EAAE,EAEhHZ,EAAU,UAAYW,EAEtBP,EAAS,QAAO,EAChBF,EAAY,UAAU,OAAO,WAAW,CACvC,OAAQW,EAAI,CACTH,EAAS,MAAM,CACP,QAASG,EACT,SAAU,UAC1B,CAAa,CAEb,CACA,EAEMC,EAAe,MAAMP,GAAS,CAChC,GAAI,CACAJ,IAEAF,EAAS,UAAU,OAAO,WAAW,EACrC,MAAMQ,EAAW,MAAMjB,EAAY,cAAeW,CAAW,EAC7DF,EAAS,UAAU,OAAO,WAAW,EAErC,MAAMU,EAAuBF,EAAS,KAAK,KAAK,IAAIG,GAAcf,EAA0Be,CAAU,CAAC,EAAE,KAAK,EAAE,EAEhHZ,EAAU,mBAAmB,YAAaW,CAAoB,EAE1DR,IAAgBM,EAAS,KAAK,WAC9BP,EAAY,UAAU,IAAI,WAAW,CAG5C,OAAQW,EAAK,CACVH,EAAS,MAAM,CACP,QAASG,EACT,SAAU,UAC1B,CAAa,CACR,CACL,EAEAd,EAAW,iBAAiB,SAAUO,CAAc,EACpDJ,EAAY,iBAAiB,QAASY,CAAY"}